{
  "hash": "02008d8c60c8f334ddb58fe8c6a8a010",
  "result": {
    "markdown": "---\ntitle: \"Take Home Exercise 1\"\nauthor: \"FANG ZI WEI\"\n---\n\n\ndata pre-processing\n\nload packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(ggstatsplot, ggthemes, plotly, corrplot, lubridate, ggpubr, plotly, treemap, hrbrthemes, ggrepel, RColorBrewer, gganimate, viridis, ggridges, ggrepel, testthat, hmisc, tidyverse, skimr, DT)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nInstalling package into 'C:/Users/ziwei/AppData/Local/R/win-library/4.2'\n(as 'lib' is unspecified)\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'hmisc' is not available for this version of R\n\nA version of this package for your version of R might be available elsewhere,\nsee the ideas at\nhttps://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Installing-packages\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Perhaps you meant 'Hmisc' ?\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: unable to access index for repository http://www.stats.ox.ac.uk/pub/RWin/bin/windows/contrib/4.2:\n  cannot open URL 'http://www.stats.ox.ac.uk/pub/RWin/bin/windows/contrib/4.2/PACKAGES'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in p_install(package, character.only = TRUE, ...):\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in library(package, lib.loc = lib.loc, character.only = TRUE,\nlogical.return = TRUE, : there is no package called 'hmisc'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in pacman::p_load(ggstatsplot, ggthemes, plotly, corrplot, lubridate, : Failed to install/load:\nhmisc\n```\n:::\n:::\n\n\nload financial journal dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinancialjournal <- read_csv(\"Take-home_Ex01/FinancialJournal.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 1513636 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): category\ndbl  (2): participantId, amount\ndttm (1): timestamp\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\ndisplay the columns and their definition and data type\n\nExplore data\n\n::: {.cell}\n\n```{.r .cell-code}\nskimr::skim(financialjournal)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |                 |\n|:------------------------|:----------------|\n|Name                     |financialjournal |\n|Number of rows           |1513636          |\n|Number of columns        |4                |\n|_______________________  |                 |\n|Column type frequency:   |                 |\n|character                |1                |\n|numeric                  |2                |\n|POSIXct                  |1                |\n|________________________ |                 |\n|Group variables          |None             |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|category      |         0|             1|   4|  14|     0|        6|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|   mean|     sd|       p0|    p25| p50|   p75|    p100|hist  |\n|:-------------|---------:|-------------:|------:|------:|--------:|------:|---:|-----:|-------:|:-----|\n|participantId |         0|             1| 480.90| 295.89|     0.00| 222.00| 464| 726.0| 1010.00|▇▇▇▆▆ |\n|amount        |         0|             1|  20.05| 111.77| -1562.73|  -5.59|  -4|  21.6| 4096.53|▁▇▁▁▁ |\n\n\n**Variable type: POSIXct**\n\n|skim_variable | n_missing| complete_rate|min        |max                 |median              | n_unique|\n|:-------------|---------:|-------------:|:----------|:-------------------|:-------------------|--------:|\n|timestamp     |         0|             1|2022-03-01 |2023-02-28 23:55:00 |2022-08-25 15:00:00 |    87366|\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(financialjournal,30)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,513,636\nColumns: 4\n$ participantId <dbl> 0, 0, …\n$ timestamp     <dttm> 2022-…\n$ category      <chr> \"Wage\"…\n$ amount        <dbl> 2472.5…\n```\n:::\n:::\n\n\ndatatable\n\n\n::: {.cell}\n\n```{.r .cell-code}\nDT::datatable(head(financialjournal,20), class = \"display\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-f3e455359862e91a179e\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f3e455359862e91a179e\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"],[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6],[\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\",\"2022-03-01T00:00:00Z\"],[\"Wage\",\"Shelter\",\"Education\",\"Wage\",\"Shelter\",\"Education\",\"Wage\",\"Shelter\",\"Education\",\"Wage\",\"Shelter\",\"Education\",\"Wage\",\"Shelter\",\"Education\",\"Wage\",\"Shelter\",\"Education\",\"Wage\",\"Shelter\"],[2472.5075589,-554.9886217,-38.00537955,2046.5622064,-554.9886217,-38.00537955,2436.9152859,-556.5529272,-12.81244502,2366.6297276,-554.9886217,-38.00537955,2456.6866762,-1556.356187,-12.81244502,2328.9207402,-600.0336247,-12.81244502,2256.2541573,-581.1919891]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>participantId<\\/th>\\n      <th>timestamp<\\/th>\\n      <th>category<\\/th>\\n      <th>amount<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,4]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false},\"selection\":{\"mode\":\"multiple\",\"selected\":null,\"target\":\"row\",\"selectable\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nsort the dataset by participantid\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinancialjournal <- financialjournal[order(financialjournal$participantId),]\n```\n:::\n\n\ncheck missing values\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolSums(is.na(financialjournal))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nparticipantId     timestamp      category        amount \n            0             0             0             0 \n```\n:::\n:::\n\n\ncheck for duplicates\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndup_rows <- duplicated(financialjournal)\n\nfinancialjournal[dup_rows, ]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,113 × 4\n   participantId timestamp           category   amount\n           <dbl> <dttm>              <chr>       <dbl>\n 1             0 2022-03-01 00:00:00 Shelter    -555. \n 2             0 2022-03-01 00:00:00 Education   -38.0\n 3             1 2022-03-01 00:00:00 Shelter    -555. \n 4             1 2022-03-01 00:00:00 Education   -38.0\n 5             2 2022-03-01 00:00:00 Shelter    -557. \n 6             2 2022-03-01 00:00:00 Education   -12.8\n 7             3 2022-03-01 00:00:00 Shelter    -555. \n 8             3 2022-03-01 00:00:00 Education   -38.0\n 9             4 2022-03-01 00:00:00 Shelter   -1556. \n10             4 2022-03-01 00:00:00 Education   -12.8\n# ℹ 1,103 more rows\n```\n:::\n:::\n\n\nremove duplicates\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinancialjournal_distinct <- unique(financialjournal)\n```\n:::\n\n\nnew variables (year, month, day, morning, noon, afternoon, midnight) split by space first\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinancialjournal_distinct[c('Date', 'Time')] <- str_split_fixed(financialjournal_distinct$timestamp, ' ', 2)\n```\n:::\n\n\nsplit the date into year, month, day\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinancialjournal_distinct[c('Year', 'Month', 'Day')] <- str_split_fixed(financialjournal_distinct$Date, '-', 3)\n```\n:::\n\n\nsplit the time into morning, noon, afternoon, evening, midnight\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinancialjournal_distinct$Time <- hms(financialjournal_distinct$Time)\n\nbreaks <- hour(hm(\"00:00\", \"6:00\", \"12:00\", \"18:00\", \"23:59\"))\n\nlabels <- c(\"Midnight\", \"Morning\", \"Afternoon\",\"Evening\")\n\nfinancialjournal_distinct$daytime <- cut(x=hour(financialjournal_distinct$Time), breaks = breaks, labels = labels, include.lowest = TRUE)\n```\n:::\n\n\ndrop time and timestamp\n\n::: {.cell}\n\n```{.r .cell-code}\nfinancialjournal_distinct <- subset(financialjournal_distinct, select = -c(Time, timestamp))\n```\n:::\n\n\n\n\nload participants dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nparticipants <- read_csv(\"Take-home_Ex01/Participants.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 1011 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): educationLevel, interestGroup\ndbl (4): participantId, householdSize, age, joviality\nlgl (1): haveKids\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\ncheck missing values\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolSums(is.na(participants))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n participantId  householdSize       haveKids            age educationLevel \n             0              0              0              0              0 \n interestGroup      joviality \n             0              0 \n```\n:::\n:::\n\n\nExplore data\n\n::: {.cell}\n\n```{.r .cell-code}\nskimr::skim(participants)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |             |\n|:------------------------|:------------|\n|Name                     |participants |\n|Number of rows           |1011         |\n|Number of columns        |7            |\n|_______________________  |             |\n|Column type frequency:   |             |\n|character                |2            |\n|logical                  |1            |\n|numeric                  |4            |\n|________________________ |             |\n|Group variables          |None         |\n\n\n**Variable type: character**\n\n|skim_variable  | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:--------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|educationLevel |         0|             1|   3|  19|     0|        4|          0|\n|interestGroup  |         0|             1|   1|   1|     0|       10|          0|\n\n\n**Variable type: logical**\n\n|skim_variable | n_missing| complete_rate| mean|count              |\n|:-------------|---------:|-------------:|----:|:------------------|\n|haveKids      |         0|             1|  0.3|FAL: 710, TRU: 301 |\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|   mean|     sd| p0|    p25|    p50|    p75| p100|hist  |\n|:-------------|---------:|-------------:|------:|------:|--:|------:|------:|------:|----:|:-----|\n|participantId |         0|             1| 505.00| 291.99|  0| 252.50| 505.00| 757.50| 1010|▇▇▇▇▇ |\n|householdSize |         0|             1|   1.96|   0.79|  1|   1.00|   2.00|   3.00|    3|▇▁▇▁▆ |\n|age           |         0|             1|  39.07|  12.38| 18|  29.00|  39.00|  50.00|   60|▇▇▇▇▇ |\n|joviality     |         0|             1|   0.49|   0.29|  0|   0.24|   0.48|   0.75|    1|▇▇▇▇▇ |\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(participants,30)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,011\nColumns: 7\n$ participantId  <dbl> 0, 1,…\n$ householdSize  <dbl> 3, 3,…\n$ haveKids       <lgl> TRUE,…\n$ age            <dbl> 36, 2…\n$ educationLevel <chr> \"High…\n$ interestGroup  <chr> \"H\", …\n$ joviality      <dbl> 0.001…\n```\n:::\n:::\n\n\ndatatable\n\n\n::: {.cell}\n\n```{.r .cell-code}\nDT::datatable(head(participants,20), class = \"display\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-ad14949f9cbecae4bca7\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ad14949f9cbecae4bca7\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],[36,25,35,21,43,32,26,27,20,35,48,27,34,18,38,35,39,57,20,25],[\"HighSchoolOrCollege\",\"HighSchoolOrCollege\",\"HighSchoolOrCollege\",\"HighSchoolOrCollege\",\"Bachelors\",\"HighSchoolOrCollege\",\"HighSchoolOrCollege\",\"Bachelors\",\"Bachelors\",\"Bachelors\",\"HighSchoolOrCollege\",\"HighSchoolOrCollege\",\"HighSchoolOrCollege\",\"Bachelors\",\"Graduate\",\"HighSchoolOrCollege\",\"Bachelors\",\"Bachelors\",\"Graduate\",\"Bachelors\"],[\"H\",\"B\",\"A\",\"I\",\"H\",\"D\",\"I\",\"A\",\"G\",\"D\",\"D\",\"F\",\"D\",\"J\",\"H\",\"I\",\"J\",\"I\",\"I\",\"B\"],[0.001626703,0.3280865,0.39346959,0.138063446,0.857396691,0.772957791,0.833980668,0.958189409,0.697554819,0.467131409,0.557176006,0.25422732,0.241615182,0.724503834,0.930003289,0.232266068,0.392189088,0.114667399,0.32696558,0.486470164]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>participantId<\\/th>\\n      <th>householdSize<\\/th>\\n      <th>haveKids<\\/th>\\n      <th>age<\\/th>\\n      <th>educationLevel<\\/th>\\n      <th>interestGroup<\\/th>\\n      <th>joviality<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,2,4,7]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false},\"selection\":{\"mode\":\"multiple\",\"selected\":null,\"target\":\"row\",\"selectable\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nNEED TO PIVOT THE TABLE\n\nNORMALITY ASSUMPTION\n(plot ggplot to see if the line is deviated)\n\n\nggstatplot\n\nNEED TO BE REPRODUCIBLE\n\n\n\n\nEDA\n\nall superset is not frequenr",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/datatables-binding-0.27/datatables.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\r\n<link href=\"../../site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\r\n<link href=\"../../site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}